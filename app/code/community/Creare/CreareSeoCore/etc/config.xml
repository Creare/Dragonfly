<?xml version="1.0"?>
<config>
  <modules>
    <Creare_CreareSeoCore>
      <version>1.0.0</version>
    </Creare_CreareSeoCore>
  </modules>
  <adminhtml>
    <layout>
      <updates>
        <creareseocore>
          <file>creareseo_admin.xml</file>
        </creareseocore>
      </updates>
    </layout>
  </adminhtml>
  <frontend>
    <layout>
      <updates>
        <creareseocore>
          <file>creareseo.xml</file>
        </creareseocore>
      </updates>
    </layout>
  </frontend>
  <admin>
    <routers>
      <adminhtml>
        <args>
            <modules>
                <creareseo before="Mage_Adminhtml">Creare_CreareSeoCore_Adminhtml</creareseo>
            </modules>
        </args>
      </adminhtml>
    </routers>
  </admin>
  <global>
    <models>
      <creareseocore>
        <class>Creare_CreareSeoCore_Model</class>
        <resourceModel>cleanup_mysql4</resourceModel>
      </creareseocore>
      <sitemap>
          <rewrite>
              <sitemap>Creare_CreareSeoCore_Model_Sitemap_Sitemap</sitemap>
          </rewrite>
      </sitemap>
    </models>
    <helpers>
      <creareseocore>
        <class>Creare_CreareSeoCore_Helper</class>
      </creareseocore>
    </helpers>
    <resources>
        <creareseo_setup>
            <setup>
                <module>Creare_CreareSeoCore</module>
            </setup>
            <connection>
                <use>core_setup</use>
            </connection>
        </creareseo_setup>
    </resources>
  </global>
  <crontab>
    <jobs>
      <creare_creareseocore>
        <schedule>
          <cron_expr>0 1 * * *</cron_expr>
        </schedule>
        <run>
          <model>creareseocore/cleanup::doCleanup</model>
        </run>
      </creare_creareseocore>
    </jobs>
  </crontab>
  <frontend>
    <events>
        <controller_action_layout_generate_xml_before>
          <observers>
            <noindex>
              <type>singleton</type>
              <class>creareseocore/observer</class>
              <method>changeRobots</method>
            </noindex>
          </observers>
        </controller_action_layout_generate_xml_before>
        <controller_action_noroute>
          <observers>
            <creareseo_discontinued>
              <type>singleton</type>
              <class>creareseocore/observer</class>
              <method>discontinuedCheck</method>
            </creareseo_discontinued>
          </observers>
        </controller_action_noroute>
        <http_response_send_before>
          <observers>
            <creareseo_keyword>
              <type>singleton</type>
              <class>creareseocore/observer</class>
              <method>applyTag</method>
            </creareseo_keyword>
          </observers>
        </http_response_send_before>
        <catalog_category_load_after>
          <observers>
            <creareseo_heading>
              <type>model</type>
              <class>creareseocore/observer</class>
              <method>seoHeading</method>
            </creareseo_heading>
          </observers>
        </catalog_category_load_after>
    </events>
  </frontend>
  <adminhtml>
      <events>
          <admin_system_config_changed_section_crearehtaccess>
            <observers>
              <creareseo_writehtaccess>
                <type>singleton</type>
                <class>creareseocore/observer</class>
                <method>writeToFileOnConfigSave</method>
              </creareseo_writehtaccess>
            </observers>
          </admin_system_config_changed_section_crearehtaccess>
          <admin_system_config_changed_section_crearerobots>
            <observers>
              <creareseo_writerobots>
                <type>singleton</type>
                <class>creareseocore/observer</class>
                <method>writeToFileOnConfigSave</method>
              </creareseo_writerobots>
            </observers>
          </admin_system_config_changed_section_crearerobots>
          <controller_action_predispatch>
             <observers>
              <creareseo_savefileconfig>
                <type>singleton</type>
                <class>creareseocore/observer</class>
                <method>saveConfigOnConfigLoad</method>
              </creareseo_savefileconfig>
            </observers>
          </controller_action_predispatch>
      </events>
  </adminhtml>
</config>